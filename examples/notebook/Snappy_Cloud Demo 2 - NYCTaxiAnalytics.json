{"paragraphs":[{"text":"%angular\n<script>\n    function openSnappyPulse(){\n      var proto = window.location.protocol;\n      var currHost = window.location.host;\n      var pulseUrl = proto + '//' + currHost.substring(0, currHost.indexOf(':') + 1) + '5050/dashboard/';\n      window.open(pulseUrl, \"_blank\");\n    }\n</script>\n\n<div style=\"background-color:whitesmoke;\">\n<br>\n <span style=\"font-weight: bold; color:#428bca; cursor:pointer;\" onclick=\"openSnappyPulse();\">Monitoring Console </span>\n<br>\n<a href=\"#/notebook/2ETF88QQF\">Zeppelin Notebook Manager</a>\n<br>\n    \n<h4>Quickstarts</h4>\n&ensp;<a href=\"#/notebook/quickstart\" >Using Spark Scala API</a>\n<br>\n&ensp;<a href=\"#/notebook/2EVF37179\" >Using SQL</a>\n<br>\n&ensp;<a href=\"#/notebook/performance\">Performance Benchmark</a>\n<br>\n\n<h4>External Data Sources </h4>\n&ensp;<a href=\"#/notebook/2EU4EJDHJ\">Load from External Data Sources</a>\n<br>\n&ensp;<a href=\"#/notebook/2EU6ZXZQJ\">Manage Connectors</a>\n<br>\n&ensp;<a href=\"#/notebook/2EUZ88BBY\">Data transformation examples</a>\n<br>\n\n<h4> Structured Streaming </h4>\n&ensp;<a href=\"#/notebook/2EUCAD6QP\">Example using file source</a>\n\n<h4><b> Demos with Big Datasets</b></h4>\n&ensp;<a href=\"#/notebook/airlineanalytics\">Airline Analytics Demo</a>\n<br>\n<!--&ensp;<a href=\"#/notebook/nyctaxianalytics\">NYC Taxi Analytics Demo</a>-->\n&ensp;<b><i>NYC Taxi Analytics Demo</i></b>\n<br>\n&ensp;<a href=\"#/notebook/2DKKFJNZR\">Performance Benchmark(S3 dataset)</a>\n<br>\n\n<h4>References</h4>\n&ensp;<a href=\"https://tibco-computedb.readthedocs.io/en/enterprise_docv1.2/\" target=\"_blank\">ComputeDB documentation</a>\n<br>\n&ensp;<a href=\"https://zeppelin.apache.org/docs/0.8.2/index.html\" target=\"_blank\">Zeppelin Documentation</a>\n</div>\n","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"scala","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":2,"editorMode":"ace/mode/undefined","fontSize":9,"editorHide":true,"results":{},"enabled":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"ANGULAR","data":"<script>\n    function openSnappyPulse(){\n      var proto = window.location.protocol;\n      var currHost = window.location.host;\n      var pulseUrl = proto + '//' + currHost.substring(0, currHost.indexOf(':') + 1) + '5050/dashboard/';\n      window.open(pulseUrl, \"_blank\");\n    }\n</script>\n\n<div style=\"background-color:whitesmoke;\">\n<br>\n <span style=\"font-weight: bold; color:#428bca; cursor:pointer;\" onclick=\"openSnappyPulse();\">Monitoring Console </span>\n<br>\n<a href=\"#/notebook/2ETF88QQF\">Zeppelin Notebook Manager</a>\n<br>\n    \n<h4>Quickstarts</h4>\n&ensp;<a href=\"#/notebook/quickstart\" >Using Spark Scala API</a>\n<br>\n&ensp;<a href=\"#/notebook/2EVF37179\" >Using SQL</a>\n<br>\n&ensp;<a href=\"#/notebook/performance\">Performance Benchmark</a>\n<br>\n\n<h4>External Data Sources </h4>\n&ensp;<a href=\"#/notebook/2EU4EJDHJ\">Load from External Data Sources</a>\n<br>\n&ensp;<a href=\"#/notebook/2EU6ZXZQJ\">Manage Connectors</a>\n<br>\n&ensp;<a href=\"#/notebook/2EUZ88BBY\">Data transformation examples</a>\n<br>\n\n<h4> Structured Streaming </h4>\n&ensp;<a href=\"#/notebook/2EUCAD6QP\">Example using file source</a>\n\n<h4><b> Demos with Big Datasets</b></h4>\n&ensp;<a href=\"#/notebook/airlineanalytics\">Airline Analytics Demo</a>\n<br>\n<!--&ensp;<a href=\"#/notebook/nyctaxianalytics\">NYC Taxi Analytics Demo</a>-->\n&ensp;<b><i>NYC Taxi Analytics Demo</i></b>\n<br>\n&ensp;<a href=\"#/notebook/2DKKFJNZR\">Performance Benchmark(S3 dataset)</a>\n<br>\n\n<h4>References</h4>\n&ensp;<a href=\"https://tibco-computedb.readthedocs.io/en/enterprise_docv1.2/\" target=\"_blank\">ComputeDB documentation</a>\n<br>\n&ensp;<a href=\"https://zeppelin.apache.org/docs/0.8.2/index.html\" target=\"_blank\">Zeppelin Documentation</a>\n</div>"}]},"apps":[],"jobName":"paragraph_1578908664305_-626088627","id":"20191206-010233_607610586","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:32969"},{"text":"%angular\n<div style=\"background-color:whitesmoke;\">\n<h2>What does this demo showcase?</h2>\n<p style=\"font-size:14;\">The New York City Taxi & Limousine Commission has released the detailed historical dataset covering over 1.1 billion individual taxi trips in the city from January 2009 through June 2015. In this Analytics demo we only use data for Year 2013. We manage the trip and fare data in two tables (NYC_TAXI_TRIP, TAXI_TRIP_FARE). Each trip contains information like the driver's license info, the pickup and dropoff times and their precise locations, etc. The fare table contains the total charge along with tip amounts for each trip. The schema for the table is below. \nEach table is over a 150 million records and instead of managing all the data in memory we simply create two stratified samples. This requires only a fraction of the memory that would otherwise be required. \n\nIn this demo, we showcase the following:\n<ol>\n<li>Execute the query on the exact data noting the time it takes to parse parquet data and execute the query using Spark parallel processing  (LEFT PARAGRAPHS)</li>\n<li>Execute the same query using <b>Approximate Query Processing (AQP)</b> engine noting both the accuracy and response time of the answer. (RIGHT PARAGRAPHS)</li>\n<li>We illustrate various features: constraining the error in query responses, Automatically swapping the approximate visualized plot with an exact response, projecting error rates as part of the query response and automatic query re-routing to underlying data source when error constraints cannot be satisfied.</li> \n</ol>\n\n<h5><i>NOTE: The data set used here is relatively small (few GB of Parquet formatted data). The interesting thing about using stratified sampling is that the error rate drops exponentially with the size of the sample. The exponential error drop off implies with larger data sets, the sampling fraction can also keep getting smaller. e.g. you may need a 2 million sample for a data set with 200 million records, but, may only need a 3 million sample for a data set with a billion records to achieve the same level of accuracy. Hence, the performance delta with sampling will be proportional to the data set size. </h5>\n<h5 style=\"color:red;font-weight:bold\">Anonymous user needs to clone this notebook to execute the paragraphs. Clone option available in the pane next to name of the notebook at the top of the page.</h5>\n</div>","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"text","editOnDblClick":true,"completionSupport":false},"colWidth":10,"editorMode":"ace/mode/undefined","editorHide":true,"fontSize":9,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false}}],"enabled":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"ANGULAR","data":"<div style=\"background-color:whitesmoke;\">\n<h2>What does this demo showcase?</h2>\n<p style=\"font-size:14;\">The New York City Taxi & Limousine Commission has released the detailed historical dataset covering over 1.1 billion individual taxi trips in the city from January 2009 through June 2015. In this Analytics demo we only use data for Year 2013. We manage the trip and fare data in two tables (NYC_TAXI_TRIP, TAXI_TRIP_FARE). Each trip contains information like the driver's license info, the pickup and dropoff times and their precise locations, etc. The fare table contains the total charge along with tip amounts for each trip. The schema for the table is below. \nEach table is over a 150 million records and instead of managing all the data in memory we simply create two stratified samples. This requires only a fraction of the memory that would otherwise be required. \n\nIn this demo, we showcase the following:\n<ol>\n<li>Execute the query on the exact data noting the time it takes to parse parquet data and execute the query using Spark parallel processing  (LEFT PARAGRAPHS)</li>\n<li>Execute the same query using <b>Approximate Query Processing (AQP)</b> engine noting both the accuracy and response time of the answer. (RIGHT PARAGRAPHS)</li>\n<li>We illustrate various features: constraining the error in query responses, Automatically swapping the approximate visualized plot with an exact response, projecting error rates as part of the query response and automatic query re-routing to underlying data source when error constraints cannot be satisfied.</li> \n</ol>\n\n<h5><i>NOTE: The data set used here is relatively small (few GB of Parquet formatted data). The interesting thing about using stratified sampling is that the error rate drops exponentially with the size of the sample. The exponential error drop off implies with larger data sets, the sampling fraction can also keep getting smaller. e.g. you may need a 2 million sample for a data set with 200 million records, but, may only need a 3 million sample for a data set with a billion records to achieve the same level of accuracy. Hence, the performance delta with sampling will be proportional to the data set size. </h5>\n<h5 style=\"color:red;font-weight:bold\">Anonymous user needs to clone this notebook to execute the paragraphs. Clone option available in the pane next to name of the notebook at the top of the page.</h5>\n</div>"}]},"apps":[],"jobName":"paragraph_1578908664307_-1512062189","id":"20160925-172803_1684905446","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32970"},{"title":"Monitor the cluster, check memory consumption","text":"%angular\n<div style=\"background-color:whitesmoke;\"> <span style=\"font-weight: bold; color:#428bca; cursor:pointer;\" onclick=\"openSnappyPulse();\">Monitoring Console </span> <span><h5> The Dashboard tab in the Monitoring Console can be used to monitor the cluster and check the memory consumed by the samples.</h5></span></div>","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"scala","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/undefined","colWidth":10,"editorHide":true,"fontSize":9,"title":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false}}],"enabled":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"ANGULAR","data":"<div style=\"background-color:whitesmoke;\"> <span style=\"font-weight: bold; color:#428bca; cursor:pointer;\" onclick=\"openSnappyPulse();\">Monitoring Console </span> <span><h5> The Dashboard tab in the Monitoring Console can be used to monitor the cluster and check the memory consumed by the samples.</h5></span></div>"}]},"apps":[],"jobName":"paragraph_1578908664307_-1852172476","id":"20170324-134252_1246434891","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32971"},{"text":"%spark\nz.put(\"aws_id\",z.textbox(\"AWS Access ID\"))\nz.put(\"aws_secret\",z.textbox(\"AWS Secret Key\"))\n\nprintln(s\"\"\"%angular\n <div style=\"color:red;background-color:whitesmoke;\">\n            <li><b>Access Credentials</b></li>\n            <ul>\n                <li>Please refer to security credentials guidelines <a href=\"https://tibco-computedb.readthedocs.io/en/enterprise_docv1.2/connectors/access_cloud_data/#using-hive-sitexml-file\" target=\"_blank\">here</a>.</li>\n                <li>The Zeppelin notebooks store state to disk. Using credentials via notebooks will result in them being written to disk. More about Zeppelin storage options is available <a href=\"https://zeppelin.apache.org/docs/0.8.0/setup/storage/storage.html\">here</a></li>\n                <li>If user still chooses to use notebooks as the mode of setting credentials, then user may clone this notebook and delete it immediately after completing use.</li>\n            </ul></div>\"\"\")\nz.run(\"20191206-005155_296046020\")","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{"AWS Access ID":"","AWS Secret Key":""},"forms":{"AWS Access ID":{"type":"TextBox","name":"AWS Access ID","displayName":"AWS Access ID","defaultValue":"","hidden":false,"$$hashKey":"object:33269"},"AWS Secret Key":{"type":"TextBox","name":"AWS Secret Key","displayName":"AWS Secret Key","defaultValue":"","hidden":false,"$$hashKey":"object:33270"}}},"results":{"code":"SUCCESS","msg":[{"type":"ANGULAR","data":" <div style=\"color:red;background-color:whitesmoke;\">\n            <li><b>Access Credentials</b></li>\n            <ul>\n                <li>Please refer to security credentials guidelines <a href=\"https://tibco-computedb.readthedocs.io/en/enterprise_docv1.2/connectors/access_cloud_data/#using-hive-sitexml-file\" target=\"_blank\">here</a>.</li>\n                <li>The Zeppelin notebooks store state to disk. Using credentials via notebooks will result in them being written to disk. More about Zeppelin storage options is available <a href=\"https://zeppelin.apache.org/docs/0.8.0/setup/storage/storage.html\">here</a></li>\n                <li>If user still chooses to use notebooks as the mode of setting credentials, then user may clone this notebook and delete it immediately after completing use.</li>\n            </ul></div>\n"}]},"apps":[],"jobName":"paragraph_1578908664307_824409744","id":"20191206-010701_376676435","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32972"},{"title":"[Auto run]","text":"%jdbc\nexec scala\norg.apache.hadoop.fs.FileSystem.closeAll()\nsc.hadoopConfiguration.set(\"fs.s3a.access.key\", \"{aws_id}\")\nsc.hadoopConfiguration.set(\"fs.s3a.secret.key\", \"{aws_secret}\")","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":true,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"editorHide":true,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"C0":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{"AWS access ID":"testID","AWS secret key":"testsec","aws_secret":""},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"C0\n"}]},"apps":[],"jobName":"paragraph_1578908664307_554617518","id":"20191206-005155_296046020","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32973"},{"title":"Let's load the data from S3 and create Stratified Samples (RUN THIS PARA ONCE)","text":"%jdbc\n-- If launched using cloud service, the Snappydata DB would automatically resurrect the samples from disk. \n-- But, we still need to re-create Spark External tables so we have access to the FULL source data. \n-- CHECK http://localhost:5050/Snappy%20Store/ IF THE SAMPLES ARE ALREADY CREATED\n\nDROP TABLE IF EXISTS NYCTAXI_pickuptime_sample;\nDROP TABLE IF EXISTS TAXIFARE_hackLicense_sample;\n\nDROP TABLE IF EXISTS NYC_TAXI_TRIP ;\nDROP TABLE IF EXISTS TAXI_TRIP_FARE;\n\n-- Commented as samples are recovered from disk on cluster startup\n\n-- Spark SQL syntax to create tables with data in S3 (you can load from many disparate sources in Spark)\n-- External tables are registered  with Spark catalog and must be created each time the cluster is started.\nCREATE EXTERNAL TABLE NYC_TAXI_TRIP USING parquet OPTIONS(path 's3a://computedb-test-data/nytaxitripdata_cleaned');\nCREATE EXTERNAL TABLE TAXI_TRIP_FARE USING parquet OPTIONS(path 's3a://computedb-test-data/nyctaxifaredata_cleaned');\n\n-- You can also host the entire table in memory by removing the 'EXTERNAL' keyword assuming you have the memory available.\n-- For loading from other sources, checkout the Spark SQL guide here(LINK)\n\n-- Create 1% sample on hour(pickuptime). i.e. we have enough samples for each hour of the day\nCREATE SAMPLE TABLE NYCTAXI_pickuptime_sample ON NYC_TAXI_TRIP  OPTIONS (qcs 'hour(pickup_datetime)', fraction '0.01', persistent 'sync');\n-- Create 1% sample on hack_license. There are about 20K hack_licenses (drivers) and we want to extract samples for each driver. \nCREATE SAMPLE TABLE TAXIFARE_hackLicense_sample on TAXI_TRIP_FARE OPTIONS (qcs 'hack_license', fraction '0.01', persistent 'sync');\n\n\n-- Counts\nSELECT COUNT(*) FROM NYCTAXI_pickuptime_sample;\nSELECT COUNT(*) FROM TAXIFARE_hacklicense_sample;\n\n-- Checkout Pulse (link above) and the storage tab for the space consumed by the samples\nSELECT 'Data loaded';\n","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/sql","colWidth":12,"editorHide":false,"fontSize":9,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"Data loaded":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[{"name":"iSight initialized","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"iSight initialized","index":0,"aggr":"sum"}}}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1578908664308_1205527363","id":"20160913-064343_1431994890","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32974"},{"title":"Schema for the table NYC_TAXI_TRIP","text":"%jdbc\nexec scala\nsnappy.table(\"nyc_taxi_trip\").printSchema","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","editorHide":false,"fontSize":9,"title":true,"results":[{}],"enabled":true},"settings":{"params":{},"forms":{}},"results":{},"apps":[],"jobName":"paragraph_1578908664308_2114288440","id":"20161009-005031_439909397","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32975"},{"title":"Comparing the number of records in base table and Sample table","text":"%md\n","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":true,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"editorMode":"ace/mode/markdown","colWidth":12,"editorHide":true,"fontSize":9,"title":true,"results":{},"enabled":false,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1578908664308_973454796","id":"20160913-102730_397816573","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32976"},{"title":"How many rows in the Trip table?","text":"%jdbc\n-- Fetch count\n\n\nselect count(*) count from nyc_taxi_trip;","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/sql","colWidth":6,"fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"COUNT":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[{"name":"COUNT","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"COUNT","index":0,"aggr":"sum"}}}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1578908664308_-1920061801","id":"20160913-102635_482610975","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32977"},{"title":"How many rows using AQP? Actual count in sample?","text":"%jdbc\n-- Fetch count. count(*) is the estimate. 'sample_count' is built-in alias to showing the actual number of records\n-- in the selected sample 'with error 0.1' - allow a maximum of 10% error in the answer. \n\nselect count(*) count, count(*) sample_count from nyc_taxi_trip with error 0.1 ;\n","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/sql","colWidth":6,"editorHide":false,"fontSize":9,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"COUNT":"string","SAMPLE_COUNT":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[{"name":"COUNT","index":0,"aggr":"sum"}],"values":[{"name":"SAMPLE_COUNT","index":1,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"COUNT","index":0,"aggr":"sum"}}}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1578908664308_434998102","id":"20160913-102147_1078513643","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32978"},{"text":"%md\n### Comparing the ride per week","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h3>Comparing the ride per week</h3>\n</div>"}]},"apps":[],"jobName":"paragraph_1578908664308_93408618","id":"20160928-172922_2055212016","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32979"},{"title":"Number of Rides per week","text":"%jdbc\n\nselect count(*) numOfRides, weekofyear(pickup_datetime) from nyc_taxi_trip \ngroup by weekofyear(pickup_datetime);\n\n","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/sql","colWidth":6,"fontSize":9,"editorHide":false,"title":true,"results":[{"graph":{"mode":"lineChart","height":300,"optionOpen":false,"keys":[{"name":"weekofyear(CAST(PICKUP_DATETIME AS DATE))","index":1,"aggr":"sum"}],"values":[{"name":"NUMOFRIDES","index":0,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"NUMOFRIDES","index":0,"aggr":"sum"},"yAxis":{"name":"weekofyear(CAST(PICKUP_DATETIME AS DATE))","index":1,"aggr":"sum"}},"setting":{"lineChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1578908664309_-1767046016","id":"20160913-103717_1785005943","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32980"},{"title":"Number of Rides per week  (Use AQP)","text":"%jdbc \n\n-- 'With error 0.1' - allow 10% error and if cannot be met run against full table\nselect count(*) numOfRides, weekofyear(pickup_datetime) from nyc_taxi_trip \ngroup by weekofyear(pickup_datetime) with error 0.1;\n","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/sql","colWidth":6,"fontSize":9,"editorHide":false,"title":true,"results":[{"graph":{"mode":"lineChart","height":300,"optionOpen":false,"keys":[{"name":"weekofyear(CAST(PICKUP_DATETIME AS DATE))","index":1,"aggr":"sum"}],"values":[{"name":"NUMOFRIDES","index":0,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"NUMOFRIDES","index":0,"aggr":"sum"},"yAxis":{"name":"weekofyear(CAST(PICKUP_DATETIME AS DATE))","index":1,"aggr":"sum"}},"setting":{"lineChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1578908664309_1875520579","id":"20160913-104339_26190446","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32981"},{"text":"%md\n","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"editorSetting":{},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1578908664309_-1796708711","id":"20160928-040939_194085087","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32982"},{"title":" What are the worst times of day to take a cab from midtown to JFK airport?","text":"%jdbc\n\n-- A more selective query: filtered on two locations in manhattan\n\nselect avg(trip_time_in_secs/60) tripTime, hour(pickup_datetime) hr, count(*) howManyTrips from nyc_taxi_trip where \nround(pickup_latitude,2) >= round(40.754931,2) and \n round(pickup_longitude,2) <= round(-73.974019,2) and \nround(pickup_latitude,2) <= round(40.757321,2) and  \nround(pickup_longitude,2) >= round(-73.995194,2) and \nround(dropoff_latitude,2) >= round(40.632471,2) and \nround(dropoff_longitude,2) <= round(-73.765469,2) and \nround(dropoff_latitude,2) <= round(40.660735,2) and \n round(dropoff_longitude,2) >= round(-73.799458,2) \ngroup by  hour(pickup_datetime) order by hr;\n","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/sql","colWidth":6,"fontSize":9,"editorHide":false,"title":true,"results":[{"graph":{"mode":"lineChart","height":300,"optionOpen":false,"keys":[{"name":"HR","index":1,"aggr":"sum"}],"values":[{"name":"TRIPTIME","index":0,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"TRIPTIME","index":0,"aggr":"sum"},"yAxis":{"name":"HR","index":1,"aggr":"sum"}},"setting":{"lineChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1578908664309_1268327420","id":"20160913-105109_332811400","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32983"},{"title":" What are the worst times of day to take a cab from midtown to JFK airport?   (Use AQP)","text":"%jdbc\n-- Note the directive 'with error' so we get and approximate answer\n\nselect avg(trip_time_in_secs/60) tripTime, hour(pickup_datetime) hr, count(*) howManyTrips from nyc_taxi_trip where \nround(pickup_latitude,2) >= round(40.754931,2) and \nround(pickup_longitude,2) <= round(-73.974019,2) and \nround(pickup_latitude,2) <= round(40.757321,2) and  \nround(pickup_longitude,2) >= round(-73.995194,2) and \nround(dropoff_latitude,2) >= round(40.632471,2) and \nround(dropoff_longitude,2) <= round(-73.765469,2) and \nround(dropoff_latitude,2) <= round(40.660735,2) and \n round(dropoff_longitude,2) >= round(-73.799458,2) \ngroup by  hour(pickup_datetime) order by hr with error;\n","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/sql","colWidth":6,"editorHide":false,"fontSize":9,"title":true,"results":[{"graph":{"mode":"lineChart","height":300,"optionOpen":false,"keys":[{"name":"HR","index":1,"aggr":"sum"}],"values":[{"name":"TRIPTIME","index":0,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"TRIPTIME","index":0,"aggr":"sum"},"yAxis":{"name":"HR","index":1,"aggr":"sum"}},"setting":{"lineChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1578908664309_28444956","id":"20160913-105108_1325523020","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32984"},{"text":"%md\n","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"editorSetting":{},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1578908664309_-904976412","id":"20160928-041044_1557092045","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32985"},{"title":"How does ridership change over months?","text":"%jdbc\n-- Query will take more than 20 seconds. And, this is just one year's data.\n\nselect count(*) numOfRides,CASE \nWHEN month(pickup_datetime) = 1 THEN 'Jan' \nWHEN month(pickup_datetime) = 2 THEN 'Feb' \nWHEN month(pickup_datetime) = 3 THEN 'Mar' \nWHEN month(pickup_datetime) = 4 THEN 'Apr' \nWHEN month(pickup_datetime) = 5 THEN 'May' \nWHEN month(pickup_datetime) = 6 THEN 'Jun'\nWHEN month(pickup_datetime) = 7 THEN 'Jul' \nWHEN month(pickup_datetime) = 8 THEN 'Aug' \nWHEN month(pickup_datetime) = 9 THEN 'Sep' \nWHEN month(pickup_datetime) = 10 THEN 'Oct' \nWHEN month(pickup_datetime) = 11 THEN 'Nov' \nWHEN month(pickup_datetime) = 12 THEN 'Dec'\nEND AS mnt from nyc_taxi_trip group by month(pickup_datetime) \norder by month(pickup_datetime);\n","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/sql","colWidth":6,"fontSize":9,"editorHide":false,"title":true,"results":[{"graph":{"mode":"lineChart","height":300,"optionOpen":false,"keys":[{"name":"MNT","index":1,"aggr":"sum"}],"values":[{"name":"NUMOFRIDES","index":0,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"NUMOFRIDES","index":0,"aggr":"sum"}},"lineWithFocus":false,"forceY":false,"setting":{"lineChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1578908664309_1260126993","id":"20160913-102929_1633634550","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32986"},{"title":"How does ridership change over months? (Use AQP) ","text":"%jdbc\n-- Run the same query but we can tolerate a 10% error ('with error 0.1')\n-- 'behavior 'do_nothing' instructs snappydata to take no action even when error constraint is not met. See docs for details. \n\nselect count(*) numOfRides,relative_error(numOFRides), CASE \nWHEN month(pickup_datetime) = 1 THEN concat('Jan', 'a')\nWHEN month(pickup_datetime) = 2 THEN 'Feb' \nWHEN month(pickup_datetime) = 3 THEN 'Mar' \nWHEN month(pickup_datetime) = 4 THEN 'Apr' \nWHEN month(pickup_datetime) = 5 THEN 'May' \nWHEN month(pickup_datetime) = 6 THEN 'Jun'\nWHEN month(pickup_datetime) = 7 THEN 'Jul' \nWHEN month(pickup_datetime) = 8 THEN 'Aug' \nWHEN month(pickup_datetime) = 9 THEN 'Sep' \nWHEN month(pickup_datetime) = 10 THEN 'Oct' \nWHEN month(pickup_datetime) = 11 THEN 'Nov' \nWHEN month(pickup_datetime) = 12 THEN 'Dec'\nEND AS mnt from nyc_taxi_trip group by month(pickup_datetime) \norder by month(pickup_datetime) with error 0.1 behavior 'do_nothing' ;\n","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"editorMode":"ace/mode/sql","colWidth":6,"fontSize":9,"editorHide":false,"title":true,"results":[{"graph":{"mode":"lineChart","height":300,"optionOpen":false,"keys":[{"name":"MNT","index":2,"aggr":"sum"}],"values":[{"name":"NUMOFRIDES","index":0,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"NUMOFRIDES","index":0,"aggr":"sum"}},"setting":{"lineChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1578908664310_1040394827","id":"20160913-102900_344385570","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32987"},{"text":"","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":true,"results":{},"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1578908664310_-158288836","id":"20160927-220843_304311260","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32988"},{"title":"How long does it take to ride from Midtown to Downtown?","text":"%jdbc\n\n-- Another selective query\n\nselect avg(trip_time_in_secs/60) tripTime, hour(pickup_datetime) as hour from nyc_taxi_trip where pickup_latitude < 40.767588 and pickup_latitude > 40.749775 and pickup_longitude > -74.001632 and  pickup_longitude < -73.974595 and dropoff_latitude > 40.716800     and  dropoff_latitude <  40.717776 and dropoff_longitude >  -74.017682 and dropoff_longitude < -74.000945 group by  hour(pickup_datetime) order by hour(pickup_datetime);\n\n","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/sql","colWidth":6,"fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"TRIPTIME":"string","HOUR":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[{"name":"HOUR","index":1,"aggr":"sum"}],"values":[{"name":"TRIPTIME","index":0,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"TRIPTIME","index":0,"aggr":"sum"}}}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1578908664310_776361270","id":"20160913-104647_1842940668","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32989"},{"title":"How long does it take to ride from Midtown to Downtown?  (Use AQP)","text":"%jdbc \n\n-- Absolute_error function provides a +/- error estimate \n-- 'with error' with no constraint indicates we can tolerate any error rate.\nselect avg(trip_time_in_secs/60) tripTime, hour(pickup_datetime) as hour, absolute_error(tripTime) from nyc_taxi_trip where pickup_latitude < 40.767588 and pickup_latitude > 40.749775 and pickup_longitude > -74.001632 and  pickup_longitude < -73.974595 and dropoff_latitude > 40.716800     and  dropoff_latitude <  40.717776 and dropoff_longitude >  -74.017682 and dropoff_longitude < -74.000945 group by hour(pickup_datetime) order by hour(pickup_datetime) with error;\n\n","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/sql","colWidth":6,"fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"TRIPTIME":"string","HOUR":"string","Absolute_Error(TRIPTIME)":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[{"name":"HOUR","index":1,"aggr":"sum"}],"values":[{"name":"TRIPTIME","index":0,"aggr":"sum"},{"name":"Absolute_Error(TRIPTIME)","index":2,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"TRIPTIME","index":0,"aggr":"sum"}}}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1578908664310_-413744930","id":"20160913-104646_1938915458","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32990"},{"text":"%md\n## Queries on Fare table","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h2>Queries on Fare table</h2>\n</div>"}]},"apps":[],"jobName":"paragraph_1578908664310_-1509565535","id":"20160927-220927_974574372","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32991"},{"title":"What are the most common tip percentages in NYC for rides?","text":"%jdbc\n\n\n-- Try switching payment types from CRD to CSH for credit card vs Cash tips\n-- Most pay no tip when using cash. Hmm!\nSELECT (ROUND( (tip_amount / fare_amount) * 100 )) tip_pct, avg(fare_amount), count(*) trips\nFROM taxi_trip_fare WHERE payment_type = ${Select paymentType ='CRD','CRD'|'CSH'} and fare_amount > 0.00 and tip_amount < 50\nGROUP BY (ROUND( tip_amount / fare_amount * 100 ))\nORDER BY (ROUND( tip_amount / fare_amount * 100 )) limit 30;\n","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/sql","colWidth":6,"fontSize":9,"editorHide":false,"title":true,"results":[{"graph":{"mode":"pieChart","height":300,"optionOpen":false,"keys":[{"name":"TIP_PCT","index":0,"aggr":"sum"}],"values":[{"name":"TRIPS","index":2,"aggr":"sum"},{"name":"avg(FARE_AMOUNT)","index":1,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"TIP_PCT","index":0,"aggr":"sum"},"yAxis":{"name":"avg(FARE_AMOUNT)","index":1,"aggr":"sum"}}}}],"enabled":true,"runOnSelectionChange":true},"settings":{"params":{"paymentType":"'CRD'","Select paymentType":"'CRD'"},"forms":{"Select paymentType":{"type":"Select","options":[{"value":"'CRD'","$$hashKey":"object:33564"},{"value":"'CSH'","$$hashKey":"object:33565"}],"name":"Select paymentType","defaultValue":"'CRD'","hidden":false,"$$hashKey":"object:33552"}}},"apps":[],"jobName":"paragraph_1578908664311_-708073099","id":"20160913-110707_798631377","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32992"},{"title":"What are the most common tip percentages in NYC for rides?  (Use AQP)","text":"%jdbc\n\n-- Payment type : 'CSH'(cash), 'CRD'(credit card), 'DIS'...\nSELECT (ROUND( (tip_amount / fare_amount) * 100 )) tip_pct, avg(fare_amount), count(*) trips\nFROM taxi_trip_fare WHERE \npayment_type = ${Select paymentType ='CRD','CRD'|'CSH'}\n and fare_amount > 0.00 and tip_amount < 50\nGROUP BY (ROUND( tip_amount / fare_amount * 100 ))\nORDER BY (ROUND( tip_amount / fare_amount * 100 )) limit 30 with error ;\n","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/sql","colWidth":6,"fontSize":9,"editorHide":false,"title":true,"results":[{"graph":{"mode":"pieChart","height":300,"optionOpen":false,"keys":[{"name":"TIP_PCT","index":0,"aggr":"sum"}],"values":[{"name":"TRIPS","index":2,"aggr":"sum"},{"name":"avg(FARE_AMOUNT)","index":1,"aggr":"sum"}],"groups":[],"scatter":{"xAxis":{"name":"TIP_PCT","index":0,"aggr":"sum"}}}}],"enabled":true,"runOnSelectionChange":true},"settings":{"params":{"paymentType":"'CRD'","payment_type":"CRD","fields":[],"paymentType in 'CRD'":"","Select paymentType":"'CRD'"},"forms":{"Select paymentType":{"type":"Select","options":[{"value":"'CRD'","$$hashKey":"object:33590"},{"value":"'CSH'","$$hashKey":"object:33591"}],"name":"Select paymentType","defaultValue":"'CRD'","hidden":false,"$$hashKey":"object:33578"}}},"apps":[],"jobName":"paragraph_1578908664311_1446179122","id":"20160913-110616_1099195513","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32993"},{"text":"%angular\n<div style=\"background-color:whitesmoke\">\n<h2> Try your own queries below ....</h2>\n<h4>You can always share your thoughts/questions or just encourage us at <a href=\"https://www.tibco.com/products/tibco-computedb\" target=\"_blank\"> https://www.tibco.com/products/tibco-computedb </a></h4>\n(You can use <a href=\"http://snappydata-slackin.herokuapp.com/\" target=\"_blank\">slack</a>,<a href=\"https://gitter.im/SnappyDataInc/snappydata\" target=\"_blank\">Gitter</a>,<a href=\"http://stackoverflow.com/questions/tagged/snappydata\" target=\"_blank\">stackoverflow </a>, or <a href=\"https://groups.google.com/forum/#!forum/snappydata-user\" target=\"_blank\">google groups</a>).\n</div>","user":"anonymous","dateUpdated":"2020-01-13T15:14:24+0530","config":{"tableHide":false,"editorSetting":{"language":"scala","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/undefined","editorHide":true,"fontSize":9,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false}}],"enabled":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"ANGULAR","data":"<div style=\"background-color:whitesmoke\">\n<h2> Try your own queries below ....</h2>\n<h4>You can always share your thoughts/questions or just encourage us at <a href=\"https://www.tibco.com/products/tibco-computedb\" target=\"_blank\"> https://www.tibco.com/products/tibco-computedb </a></h4>\n(You can use <a href=\"http://snappydata-slackin.herokuapp.com/\" target=\"_blank\">slack</a>,<a href=\"https://gitter.im/SnappyDataInc/snappydata\" target=\"_blank\">Gitter</a>,<a href=\"http://stackoverflow.com/questions/tagged/snappydata\" target=\"_blank\">stackoverflow </a>, or <a href=\"https://groups.google.com/forum/#!forum/snappydata-user\" target=\"_blank\">google groups</a>).\n</div>"}]},"apps":[],"jobName":"paragraph_1578908664311_-1554705994","id":"20170324-134332_252144791","dateCreated":"2020-01-13T15:14:24+0530","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:32994"}],"name":"Snappy/Cloud Demo 2 - NYCTaxiAnalytics","id":"2F13A3N29","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"angular:shared_process":[],"spark:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}